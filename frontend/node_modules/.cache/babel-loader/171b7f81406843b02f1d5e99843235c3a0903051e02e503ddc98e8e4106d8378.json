{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport authService from './authService';\nconst initialState = {\n  isAuthenticated: false,\n  isPending: false,\n  isRejected: false,\n  username: '',\n  room_number: '',\n  message: ''\n};\nexport const register = createAsyncThunk('auth/register', async (user, thunkAPI) => {\n  try {\n    return await authService.register(user);\n  } catch (error) {\n    const message = error.response && error.response.data && error.response.data.message || error.message || error.toString();\n    return thunkAPI.rejectWithValue(message);\n  }\n});\nexport const login = createAsyncThunk('auth/login', async (user, thunkAPI) => {\n  try {\n    return await authService.login(user);\n  } catch (error) {\n    const message = error.response.data['error'];\n    return thunkAPI.rejectWithValue(message);\n  }\n});\nexport const logout = createAsyncThunk('auth/logout', async (user, thunkAPI) => {\n  try {\n    return await authService.logout(user);\n  } catch (error) {\n    const message = error.response && error.response.data && error.response.data.message && error.response.data.error || error.message || error.toString();\n    return thunkAPI.rejectWithValue(message);\n  }\n});\nexport const isAuth = createAsyncThunk('auth/check', async (user, thunkAPI) => {\n  try {\n    return await authService.isAuth();\n  } catch (error) {\n    const message = error.response && error.response.data && error.response.data.message || error.message || error.toString();\n    return thunkAPI.rejectWithValue(message);\n  }\n});\nexport const authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(register.fulfilled, (state, action) => {\n      state.isAuthenticated = true;\n      state.isPending = false;\n      state.isRejected = false;\n      state.username = action.payload['username'];\n      if (action.payload['room']) {\n        state.room_number = action.payload['room']['number'];\n      }\n      state.message = `Welcome, ${state.username}`;\n    }).addCase(register.pending, (state, action) => {\n      state.isAuthenticated = false;\n      state.isPending = true;\n      state.isRejected = false;\n    }).addCase(register.rejected, (state, action) => {\n      state.isAuthenticated = false;\n      state.isPending = false;\n      state.isRejected = true;\n      state.username = '';\n      state.room_number = '';\n      state.message = action.payload;\n    }).addCase(login.fulfilled, (state, action) => {\n      state.isAuthenticated = true;\n      state.isPending = false;\n      state.isRejected = false;\n      state.username = action.payload['username'];\n      if (action.payload['room']) {\n        state.room_number = action.payload['room']['number'];\n      }\n      state.message = `Welcome, ${state.username}`;\n    }).addCase(login.pending, (state, action) => {\n      state.isAuthenticated = false;\n      state.isPending = true;\n      state.isRejected = false;\n    }).addCase(login.rejected, (state, action) => {\n      state.isAuthenticated = false;\n      state.isPending = false;\n      state.isRejected = true;\n      state.username = '';\n      state.room_number = '';\n      state.message = action.payload;\n    }).addCase(logout.fulfilled, (state, action) => {\n      state.isAuthenticated = false;\n      state.isPending = false;\n      state.isRejected = false;\n      state.username = '';\n      state.room_number = '';\n      state.message = 'Logged out';\n    }).addCase(logout.pending, (state, action) => {\n      state.isPending = true;\n    }).addCase(logout.rejected, (state, action) => {\n      state.isPending = false;\n      state.message = action.payload;\n    }).addCase(isAuth.fulfilled, (state, action) => {\n      state.isAuthenticated = true;\n      state.isPending = false;\n      state.isRejected = false;\n      state.username = action.payload['username'];\n      if (action.payload['room']) {\n        state.room_number = action.payload['room']['number'];\n      }\n      state.message = '';\n    }).addCase(isAuth.pending, (state, action) => {\n      state.isAuthenticated = false;\n      state.isPending = true;\n      state.isRejected = false;\n      state.username = '';\n      state.room_number = '';\n      state.message = '';\n    }).addCase(isAuth.rejected, (state, action) => {\n      state.isAuthenticated = false;\n      state.isPending = false;\n      state.isRejected = true;\n      state.username = '';\n      state.room_number = '';\n      state.message = '';\n    });\n  }\n});\nexport default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","authService","initialState","isAuthenticated","isPending","isRejected","username","room_number","message","register","user","thunkAPI","error","response","data","toString","rejectWithValue","login","logout","isAuth","authSlice","name","reducers","extraReducers","builder","addCase","fulfilled","state","action","payload","pending","rejected","reducer"],"sources":["/Users/jrrrrr/CS50W/final/dorm/frontend/src/features/auth/authSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\nimport authService from './authService'\n\nconst initialState = {\n    isAuthenticated: false,\n    isPending: false,\n    isRejected: false,\n    username: '',\n    room_number: '',\n    message: ''\n}\n\nexport const register = createAsyncThunk('auth/register', async (user, thunkAPI) => {\n    try {\n        return await authService.register(user)\n    } catch (error) {\n        const message = (error.response && error.response.data && error.response.data.message) || error.message || error.toString()\n        return thunkAPI.rejectWithValue(message)\n    }\n})\n\nexport const login = createAsyncThunk('auth/login', async (user, thunkAPI) => {\n    try {\n        return await authService.login(user)\n    } catch (error) {\n        const message = error.response.data['error']\n        return thunkAPI.rejectWithValue(message)\n    }\n})\n\nexport const logout = createAsyncThunk('auth/logout', async (user, thunkAPI) => {\n    try {\n        return await authService.logout(user)\n    } catch (error) {\n        const message = (error.response && error.response.data && error.response.data.message && error.response.data.error) || error.message || error.toString()\n        return thunkAPI.rejectWithValue(message)\n    }\n})\n\nexport const isAuth = createAsyncThunk('auth/check', async (user, thunkAPI) => {\n    try {\n        return await authService.isAuth()\n    } catch (error) {\n        const message = (error.response && error.response.data && error.response.data.message) || error.message || error.toString()\n        return thunkAPI.rejectWithValue(message)\n    }\n})\n\nexport const authSlice = createSlice({\n    name: 'auth',\n    initialState,\n    reducers: {\n\n    },\n    extraReducers: (builder) => {\n        builder\n            .addCase(register.fulfilled, (state, action) => {\n                state.isAuthenticated = true\n                state.isPending = false\n                state.isRejected = false\n                state.username = action.payload['username']\n                if (action.payload['room']) {\n                    state.room_number = action.payload['room']['number']\n                }\n                state.message = `Welcome, ${state.username}`\n            })\n            .addCase(register.pending, (state, action) => {\n                state.isAuthenticated = false\n                state.isPending = true\n                state.isRejected = false\n            })\n            .addCase(register.rejected, (state, action) => {\n                state.isAuthenticated = false\n                state.isPending = false\n                state.isRejected = true\n                state.username = ''\n                state.room_number = ''\n                state.message = action.payload\n            })\n            .addCase(login.fulfilled, (state, action) => {\n                state.isAuthenticated = true\n                state.isPending = false\n                state.isRejected = false\n                state.username = action.payload['username']\n                if (action.payload['room']) {\n                    state.room_number = action.payload['room']['number']\n                }\n                state.message = `Welcome, ${state.username}`\n            })\n            .addCase(login.pending, (state, action) => {\n                state.isAuthenticated = false\n                state.isPending = true\n                state.isRejected = false\n            })\n            .addCase(login.rejected, (state, action) => {\n                state.isAuthenticated = false\n                state.isPending = false\n                state.isRejected = true\n                state.username = ''\n                state.room_number = ''\n                state.message = action.payload\n            })\n            .addCase(logout.fulfilled, (state, action) => {\n                state.isAuthenticated = false\n                state.isPending = false\n                state.isRejected = false\n                state.username = ''\n                state.room_number = ''\n                state.message = 'Logged out'\n            })\n            .addCase(logout.pending, (state, action) => {\n                state.isPending = true\n            })\n            .addCase(logout.rejected, (state, action) => {\n                state.isPending = false\n                state.message = action.payload\n            })\n            .addCase(isAuth.fulfilled, (state, action) => {\n                state.isAuthenticated = true\n                state.isPending = false\n                state.isRejected = false\n                state.username = action.payload['username']\n                if (action.payload['room']) {\n                    state.room_number = action.payload['room']['number']\n                }\n                state.message = ''\n            })\n            .addCase(isAuth.pending, (state, action) => {\n                state.isAuthenticated = false\n                state.isPending = true\n                state.isRejected = false\n                state.username = ''\n                state.room_number = ''\n                state.message = ''\n            })\n            .addCase(isAuth.rejected, (state, action) => {\n                state.isAuthenticated = false\n                state.isPending = false\n                state.isRejected = true\n                state.username = ''\n                state.room_number = ''\n                state.message = ''\n            })\n    }\n})\n\nexport default authSlice.reducer"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}