{"ast":null,"code":"import{useEffect}from'react';import{formatTimeslot,formatDate}from'./Appointments';import{useSelector,useDispatch}from'react-redux';import{cancelAppt,myAppt}from'../features/appt/apptSlice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function MyAppointments(){var _useSelector=useSelector(function(state){return state.appt;}),appointments=_useSelector.appointments;var dispatch=useDispatch();useEffect(function(){dispatch(myAppt());},[dispatch]);function onDelete(id){// Cancel the appointmen on the server and refresh the table\n// id = appointment id\nvar userData={id:id};dispatch(cancelAppt(userData));dispatch(myAppt());}return/*#__PURE__*/_jsxs(\"div\",{className:\"container text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mb-3\",children:\"My Appointmets\"}),/*#__PURE__*/_jsx(MyAppointmentsTable,{appts:appointments,onDelete:onDelete})]});}function MyAppointmentsTable(_ref){var appts=_ref.appts,onDelete=_ref.onDelete;var rows=[];for(var id in appts){rows.push(/*#__PURE__*/_jsx(MyAppointmentsTableRow,{appt:appts[id],onDelete:onDelete},appts[id].id));}return/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped align-middle\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"w-25\",children:\"date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"w-25\",children:\"timeslot\"}),/*#__PURE__*/_jsx(\"th\",{className:\"w-auto\",children:\"machine\"}),/*#__PURE__*/_jsx(\"th\",{className:\"w-25\",children:\"cancel\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:rows})]});}function MyAppointmentsTableRow(_ref2){var appt=_ref2.appt,onDelete=_ref2.onDelete;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:formatDate(appt.date)}),/*#__PURE__*/_jsx(\"td\",{children:formatTimeslot(appt.timeslot)}),/*#__PURE__*/_jsx(\"td\",{children:appt.machine+1}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{\"data-id\":appt.id,type:\"button\",className:\"btn btn-outline-secondary\",onClick:function onClick(e){onDelete(e.target.dataset.id);},children:\"cancel\"})})]});}","map":{"version":3,"names":["useEffect","formatTimeslot","formatDate","useSelector","useDispatch","cancelAppt","myAppt","jsx","_jsx","jsxs","_jsxs","MyAppointments","_useSelector","state","appt","appointments","dispatch","onDelete","id","userData","className","children","MyAppointmentsTable","appts","_ref","rows","push","MyAppointmentsTableRow","_ref2","date","timeslot","machine","type","onClick","e","target","dataset"],"sources":["/Users/jrrrrr/CS50W/final/frontend/src/pages/MyAppointments.js"],"sourcesContent":["import { useEffect } from 'react'\nimport { formatTimeslot, formatDate} from './Appointments'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { cancelAppt, myAppt } from '../features/appt/apptSlice'\n\nexport default function MyAppointments() {\n    const { appointments } = useSelector((state) => state.appt)\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        dispatch(myAppt())\n    }, [dispatch])\n\n    function onDelete(id) {\n        // Cancel the appointmen on the server and refresh the table\n        // id = appointment id\n        const userData = {\n            id\n        }\n        dispatch(cancelAppt(userData))\n        dispatch(myAppt())\n    }\n\n    return (\n\n        <div className=\"container text-center\">\n            <h3 className=\"mb-3\">My Appointmets</h3>\n            <MyAppointmentsTable appts={appointments} onDelete={onDelete} />\n        </div>\n\n    )\n}\n\nfunction MyAppointmentsTable({ appts, onDelete }) {\n    let rows = []\n    for (let id in appts) {\n        rows.push(\n            <MyAppointmentsTableRow key={appts[id].id} appt={appts[id]} onDelete={onDelete} />\n        )\n    }\n    return (\n        <table className=\"table table-striped align-middle\">\n            <thead>\n                <tr>\n                    <th className='w-25'>date</th>\n                    <th className='w-25'>timeslot</th>\n                    <th className='w-auto'>machine</th>\n                    <th className='w-25'>cancel</th>\n                </tr>\n            </thead>\n            <tbody>\n                {rows}\n            </tbody>\n        </table>\n\n    )\n}\n\nfunction MyAppointmentsTableRow({ appt, onDelete }) {\n    return (\n        <tr>\n            <td>\n                {formatDate(appt.date)}\n            </td>\n            <td>\n                {formatTimeslot(appt.timeslot)}\n            </td>\n            <td>\n                {appt.machine + 1}\n            </td>\n            <td>\n                <button data-id={appt.id} type=\"button\" className=\"btn btn-outline-secondary\" onClick={(e) => { onDelete(e.target.dataset.id) }}>cancel</button>\n            </td>\n        </tr>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}