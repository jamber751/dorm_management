{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jrrrrr/CS50W/final/dorm/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jrrrrr/CS50W/final/dorm/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/jrrrrr/CS50W/final/dorm/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/jrrrrr/CS50W/final/dorm/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/jrrrrr/CS50W/final/dorm/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import{useState}from\"react\";import{getCSRF}from\"../features/auth/authService\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function AddDevice(_ref){var toast=_ref.toast;var _useState=useState({mac:'',type:''}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setformData=_useState2[1];var mac=formData.mac,type=formData.type;function onChange(e){setformData(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},e.target.name,e.target.value));});}function onSubmit(_x){return _onSubmit.apply(this,arguments);}function _onSubmit(){_onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var mac_address,id,userData,config;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();mac_address=mac.trim().split(':');if(!(mac_address.length!==6)){_context.next=5;break;}toast.error('Invalid MAC Address');return _context.abrupt(\"return\");case 5:_context.t0=_regeneratorRuntime().keys(mac_address);case 6:if((_context.t1=_context.t0()).done){_context.next=16;break;}id=_context.t1.value;if(!(mac_address[id].length!==2)){_context.next=11;break;}toast.error('Invalid MAC Address');return _context.abrupt(\"return\");case 11:if(isAlphanumeric(mac_address[id])){_context.next=14;break;}toast.error('Invalid MAC Address');return _context.abrupt(\"return\");case 14:_context.next=6;break;case 16:userData={'mac':mac.trim(),'type':type.trim()};_context.next=19;return getCSRF();case 19:config=_context.sent;_context.prev=20;_context.next=23;return axios.post('device/register',userData,config);case 23:toast.success('Device added');_context.next=29;break;case 26:_context.prev=26;_context.t2=_context[\"catch\"](20);toast.error(_context.t2.response.data.error);case 29:setformData(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{mac:'',type:''});});case 30:case\"end\":return _context.stop();}},_callee,null,[[20,26]]);}));return _onSubmit.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-5 text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Register new device\"}),/*#__PURE__*/_jsx(\"p\",{className:\"lead\",children:\"enter the MAC addres and device type\"})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"lead fw-bold\",children:\"Mac Address\"}),/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"ex. 44:38:39:ff:ef:57\"}),/*#__PURE__*/_jsx(\"input\",{autoComplete:\"off\",type:\"text\",className:\"form-control\",name:\"mac\",id:\"mac\",placeholder:\"mac address\",onChange:onChange,value:mac})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"lead fw-bold\",children:\"Device type\"}),/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"ex. MacBook Pro 14' 2022\"}),/*#__PURE__*/_jsx(\"input\",{autoComplete:\"off\",type:\"text\",className:\"form-control\",name:\"type\",id:\"type\",placeholder:\"device type\",onChange:onChange,value:type})]}),/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-secondary\",children:\"Save\"})})]})]});}export function isAlphanumeric(str){return /^[a-zA-Z0-9]+$/.test(str);}","map":{"version":3,"names":["axios","useState","getCSRF","jsx","_jsx","jsxs","_jsxs","AddDevice","_ref","toast","_useState","mac","type","_useState2","_slicedToArray","formData","setformData","onChange","e","prevState","_objectSpread","_defineProperty","target","name","value","onSubmit","_x","_onSubmit","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","mac_address","id","userData","config","wrap","_callee$","_context","prev","next","preventDefault","trim","split","length","error","abrupt","t0","keys","t1","done","isAlphanumeric","sent","post","success","t2","response","data","stop","className","children","autoComplete","placeholder","str","test"],"sources":["/Users/jrrrrr/CS50W/final/dorm/frontend/src/pages/AddDevice.js"],"sourcesContent":["import axios from 'axios'\nimport { useState } from \"react\"\nimport { getCSRF } from \"../features/auth/authService\"\n\nexport default function AddDevice({ toast }) {\n    const [formData, setformData] = useState({\n        mac: '',\n        type: ''\n    })\n    const { mac, type } = formData\n\n    function onChange(e) {\n        setformData((prevState) => ({\n            ...prevState,\n            [e.target.name]: e.target.value\n        }))\n    }\n\n    async function onSubmit(e) {\n        e.preventDefault()\n        const mac_address = mac.trim().split(':')\n        if (mac_address.length !== 6) {\n            toast.error('Invalid MAC Address')\n            return\n        }\n        for (let id in mac_address) {\n            if (mac_address[id].length !== 2) {\n                toast.error('Invalid MAC Address')\n                return\n            }\n            if (!isAlphanumeric(mac_address[id])) {\n                toast.error('Invalid MAC Address')\n                return\n            }\n        }\n\n        let userData = {\n            'mac': mac.trim(),\n            'type': type.trim()\n        }\n\n        const config = await getCSRF()\n        try {\n            await axios.post('device/register', userData, config)\n            toast.success('Device added')\n        } catch (error) {\n            toast.error(error.response.data.error)\n        }\n\n        setformData((prevState) => ({\n            ...prevState,\n            mac: '',\n            type: ''\n        }))\n    }\n\n\n    return (\n        <div className=\"container\">\n            <div className=\"mb-5 text-center\">\n                <h1>Register new device</h1>\n                <p className=\"lead\">enter the MAC addres and device type</p>\n            </div>\n            <hr />\n            <form onSubmit={onSubmit}>\n                <div className=\"mb-3\">\n                    <p className=\"lead fw-bold\">Mac Address</p>\n                    <label className=\"form-label\">ex. 44:38:39:ff:ef:57</label>\n                    <input\n                        autoComplete=\"off\"\n                        type=\"text\"\n                        className=\"form-control\"\n                        name=\"mac\" id=\"mac\"\n                        placeholder=\"mac address\"\n                        onChange={onChange}\n                        value={mac}\n                    />\n                </div>\n                <hr />\n                <div className=\"mb-4\">\n                    <p className=\"lead fw-bold\">Device type</p>\n                    <label className=\"form-label\">ex. MacBook Pro 14' 2022</label>\n                    <input\n                        autoComplete=\"off\"\n                        type=\"text\"\n                        className=\"form-control\"\n                        name=\"type\"\n                        id=\"type\"\n                        placeholder=\"device type\"\n                        onChange={onChange}\n                        value={type}\n                    />\n                </div>\n                {/* <hr /> */}\n                <div className=\"\">\n                    <button type=\"submit\" className=\"btn btn-secondary\">Save</button>\n                </div>\n            </form>\n        </div>\n    )\n}\n\nexport function isAlphanumeric(str) {\n    return /^[a-zA-Z0-9]+$/.test(str);\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}